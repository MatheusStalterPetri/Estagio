{"ast":null,"code":"import SortDataOperation from '../operations/sort.js';\nimport FilterDataOperation from '../operations/filter.js';\nimport { isDefined } from '../internal/is-defined.js';\nexport class DataOperationsController {\n  constructor(host) {\n    this.host = host;\n    this.sorting = new SortDataOperation();\n    this.filtering = new FilterDataOperation();\n    this.host.addController(this);\n  }\n  hostConnected() {}\n  get hasCustomSort() {\n    var _a;\n    return isDefined((_a = this.host.dataPipelineConfiguration) === null || _a === void 0 ? void 0 : _a.sort);\n  }\n  get hasCustomFilter() {\n    var _a;\n    return isDefined((_a = this.host.dataPipelineConfiguration) === null || _a === void 0 ? void 0 : _a.filter);\n  }\n  get customFilter() {\n    return this.host.dataPipelineConfiguration.filter;\n  }\n  get customSort() {\n    return this.host.dataPipelineConfiguration.sort;\n  }\n  async apply(data, state) {\n    const {\n      filtering,\n      sorting\n    } = state;\n    data = this.hasCustomFilter ? await this.customFilter({\n      data,\n      grid: this.host,\n      type: 'filter'\n    }) : this.filtering.apply(data, filtering.state);\n    data = this.hasCustomSort ? await this.customSort({\n      data,\n      grid: this.host,\n      type: 'sort'\n    }) : this.sorting.apply(data, sorting.state);\n    return data;\n  }\n}","map":{"version":3,"names":["SortDataOperation","FilterDataOperation","isDefined","DataOperationsController","constructor","host","sorting","filtering","addController","hostConnected","hasCustomSort","_a","dataPipelineConfiguration","sort","hasCustomFilter","filter","customFilter","customSort","apply","data","state","grid","type"],"sources":["../../../src/controllers/data-operation.ts"],"sourcesContent":["import { ReactiveController } from 'lit';\nimport SortDataOperation from '../operations/sort.js';\nimport FilterDataOperation from '../operations/filter.js';\nimport type { GridHost } from '../internal/types.js';\nimport type { StateController } from './state.js';\nimport { isDefined } from '../internal/is-defined.js';\n\nexport class DataOperationsController<T extends object> implements ReactiveController {\n  protected sorting = new SortDataOperation<T>();\n  protected filtering = new FilterDataOperation<T>();\n\n  constructor(protected host: GridHost<T>) {\n    this.host.addController(this);\n  }\n\n  public hostConnected() {}\n\n  protected get hasCustomSort() {\n    return isDefined(this.host.dataPipelineConfiguration?.sort);\n  }\n\n  protected get hasCustomFilter() {\n    return isDefined(this.host.dataPipelineConfiguration?.filter);\n  }\n\n  protected get customFilter() {\n    return this.host.dataPipelineConfiguration!.filter!;\n  }\n\n  protected get customSort() {\n    return this.host.dataPipelineConfiguration!.sort!;\n  }\n\n  public async apply(data: T[], state: StateController<T>) {\n    const { filtering, sorting } = state;\n\n    data = this.hasCustomFilter\n      ? await this.customFilter({ data, grid: this.host, type: 'filter' })\n      : this.filtering.apply(data, filtering.state);\n\n    data = this.hasCustomSort\n      ? await this.customSort({ data, grid: this.host, type: 'sort' })\n      : this.sorting.apply(data, sorting.state);\n\n    return data;\n  }\n}\n"],"mappings":"AACA,OAAOA,iBAAiB,MAAM,uBAAuB;AACrD,OAAOC,mBAAmB,MAAM,yBAAyB;AAGzD,SAASC,SAAS,QAAQ,2BAA2B;AAErD,OAAM,MAAOC,wBAAwB;EAInCC,YAAsBC,IAAiB;IAAjB,KAAAA,IAAI,GAAJA,IAAI;IAHhB,KAAAC,OAAO,GAAG,IAAIN,iBAAiB,EAAK;IACpC,KAAAO,SAAS,GAAG,IAAIN,mBAAmB,EAAK;IAGhD,IAAI,CAACI,IAAI,CAACG,aAAa,CAAC,IAAI,CAAC;EAC/B;EAEOC,aAAaA,CAAA,GAAI;EAExB,IAAcC,aAAaA,CAAA;;IACzB,OAAOR,SAAS,CAAC,CAAAS,EAAA,OAAI,CAACN,IAAI,CAACO,yBAAyB,cAAAD,EAAA,uBAAAA,EAAA,CAAEE,IAAI,CAAC;EAC7D;EAEA,IAAcC,eAAeA,CAAA;;IAC3B,OAAOZ,SAAS,CAAC,CAAAS,EAAA,OAAI,CAACN,IAAI,CAACO,yBAAyB,cAAAD,EAAA,uBAAAA,EAAA,CAAEI,MAAM,CAAC;EAC/D;EAEA,IAAcC,YAAYA,CAAA;IACxB,OAAO,IAAI,CAACX,IAAI,CAACO,yBAA0B,CAACG,MAAO;EACrD;EAEA,IAAcE,UAAUA,CAAA;IACtB,OAAO,IAAI,CAACZ,IAAI,CAACO,yBAA0B,CAACC,IAAK;EACnD;EAEO,MAAMK,KAAKA,CAACC,IAAS,EAAEC,KAAyB;IACrD,MAAM;MAAEb,SAAS;MAAED;IAAO,CAAE,GAAGc,KAAK;IAEpCD,IAAI,GAAG,IAAI,CAACL,eAAe,GACvB,MAAM,IAAI,CAACE,YAAY,CAAC;MAAEG,IAAI;MAAEE,IAAI,EAAE,IAAI,CAAChB,IAAI;MAAEiB,IAAI,EAAE;IAAQ,CAAE,CAAC,GAClE,IAAI,CAACf,SAAS,CAACW,KAAK,CAACC,IAAI,EAAEZ,SAAS,CAACa,KAAK,CAAC;IAE/CD,IAAI,GAAG,IAAI,CAACT,aAAa,GACrB,MAAM,IAAI,CAACO,UAAU,CAAC;MAAEE,IAAI;MAAEE,IAAI,EAAE,IAAI,CAAChB,IAAI;MAAEiB,IAAI,EAAE;IAAM,CAAE,CAAC,GAC9D,IAAI,CAAChB,OAAO,CAACY,KAAK,CAACC,IAAI,EAAEb,OAAO,CAACc,KAAK,CAAC;IAE3C,OAAOD,IAAI;EACb"},"metadata":{},"sourceType":"module","externalDependencies":[]}