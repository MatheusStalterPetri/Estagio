{"ast":null,"code":"import GroupDataOperation from '../operations/group.js';\nimport FilterDataOperation from '../operations/filter.js';\nexport class DataController {\n  constructor(host) {\n    this.host = host;\n    this.grouping = new GroupDataOperation();\n    this.filtering = new FilterDataOperation();\n    this._searchTerm = '';\n    this.host.addController(this);\n  }\n  set searchTerm(value) {\n    this._searchTerm = value;\n    this.host.requestUpdate('pipeline');\n  }\n  get searchTerm() {\n    return this._searchTerm;\n  }\n  get filteringOptions() {\n    return this.host.filteringOptions;\n  }\n  get groupingOptions() {\n    return {\n      valueKey: this.host.valueKey,\n      displayKey: this.host.displayKey,\n      groupKey: this.host.groupKey,\n      direction: this.host.groupSorting\n    };\n  }\n  index(data) {\n    return data.map((item, index) => ({\n      ...item,\n      dataIndex: index\n    }));\n  }\n  hostConnected() {}\n  async apply(data) {\n    data = this.index(data);\n    data = this.filtering.apply(data, this);\n    data = this.grouping.apply(data, this);\n    return data;\n  }\n}","map":{"version":3,"names":["GroupDataOperation","FilterDataOperation","DataController","constructor","host","grouping","filtering","_searchTerm","addController","searchTerm","value","requestUpdate","filteringOptions","groupingOptions","valueKey","displayKey","groupKey","direction","groupSorting","index","data","map","item","dataIndex","hostConnected","apply"],"sources":["../../../../src/components/combo/controllers/data.ts"],"sourcesContent":["import { ReactiveController } from 'lit';\nimport GroupDataOperation from '../operations/group.js';\nimport FilterDataOperation from '../operations/filter.js';\nimport {\n  ComboHost,\n  ComboRecord,\n  FilteringOptions,\n  GroupingOptions,\n} from '../types.js';\n\nexport class DataController<T extends object> implements ReactiveController {\n  protected grouping = new GroupDataOperation<T>();\n  protected filtering = new FilterDataOperation<T>();\n  private _searchTerm = '';\n\n  constructor(protected host: ComboHost<T>) {\n    this.host.addController(this);\n  }\n\n  public set searchTerm(value: string) {\n    this._searchTerm = value;\n    this.host.requestUpdate('pipeline');\n  }\n\n  public get searchTerm() {\n    return this._searchTerm;\n  }\n\n  public get filteringOptions(): FilteringOptions<T> {\n    return this.host.filteringOptions;\n  }\n\n  public get groupingOptions(): GroupingOptions<T> {\n    return {\n      valueKey: this.host.valueKey,\n      displayKey: this.host.displayKey,\n      groupKey: this.host.groupKey,\n      direction: this.host.groupSorting,\n    };\n  }\n\n  private index(data: T[]) {\n    return data.map((item, index) => ({ ...item, dataIndex: index }));\n  }\n\n  public hostConnected() {}\n\n  public async apply(data: T[]): Promise<ComboRecord<T>[]> {\n    data = this.index(data);\n    data = this.filtering.apply(data, this);\n    data = this.grouping.apply(data, this);\n\n    return data as ComboRecord<T>[];\n  }\n}\n"],"mappings":"AACA,OAAOA,kBAAkB,MAAM,wBAAwB;AACvD,OAAOC,mBAAmB,MAAM,yBAAyB;AAQzD,OAAM,MAAOC,cAAc;EAKzBC,YAAsBC,IAAkB;IAAlB,KAAAA,IAAI,GAAJA,IAAI;IAJhB,KAAAC,QAAQ,GAAG,IAAIL,kBAAkB,EAAK;IACtC,KAAAM,SAAS,GAAG,IAAIL,mBAAmB,EAAK;IAC1C,KAAAM,WAAW,GAAG,EAAE;IAGtB,IAAI,CAACH,IAAI,CAACI,aAAa,CAAC,IAAI,CAAC;EAC/B;EAEA,IAAWC,UAAUA,CAACC,KAAa;IACjC,IAAI,CAACH,WAAW,GAAGG,KAAK;IACxB,IAAI,CAACN,IAAI,CAACO,aAAa,CAAC,UAAU,CAAC;EACrC;EAEA,IAAWF,UAAUA,CAAA;IACnB,OAAO,IAAI,CAACF,WAAW;EACzB;EAEA,IAAWK,gBAAgBA,CAAA;IACzB,OAAO,IAAI,CAACR,IAAI,CAACQ,gBAAgB;EACnC;EAEA,IAAWC,eAAeA,CAAA;IACxB,OAAO;MACLC,QAAQ,EAAE,IAAI,CAACV,IAAI,CAACU,QAAQ;MAC5BC,UAAU,EAAE,IAAI,CAACX,IAAI,CAACW,UAAU;MAChCC,QAAQ,EAAE,IAAI,CAACZ,IAAI,CAACY,QAAQ;MAC5BC,SAAS,EAAE,IAAI,CAACb,IAAI,CAACc;KACtB;EACH;EAEQC,KAAKA,CAACC,IAAS;IACrB,OAAOA,IAAI,CAACC,GAAG,CAAC,CAACC,IAAI,EAAEH,KAAK,MAAM;MAAE,GAAGG,IAAI;MAAEC,SAAS,EAAEJ;IAAK,CAAE,CAAC,CAAC;EACnE;EAEOK,aAAaA,CAAA,GAAI;EAEjB,MAAMC,KAAKA,CAACL,IAAS;IAC1BA,IAAI,GAAG,IAAI,CAACD,KAAK,CAACC,IAAI,CAAC;IACvBA,IAAI,GAAG,IAAI,CAACd,SAAS,CAACmB,KAAK,CAACL,IAAI,EAAE,IAAI,CAAC;IACvCA,IAAI,GAAG,IAAI,CAACf,QAAQ,CAACoB,KAAK,CAACL,IAAI,EAAE,IAAI,CAAC;IAEtC,OAAOA,IAAwB;EACjC"},"metadata":{},"sourceType":"module","externalDependencies":[]}